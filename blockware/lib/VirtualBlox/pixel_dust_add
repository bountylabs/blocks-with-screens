<button id="accelid">accel</button>
    <script type='text/javascript'>

      function handleMotion(event) {

        var gx = event.accelerationIncludingGravity.x * 500;
        var gy = event.accelerationIncludingGravity.y * 500;
        var gz = event.accelerationIncludingGravity.z * 500;

        Module.updateAccelerometer(-gx, gy, gz);
}
      function onClick() {
      if (typeof DeviceMotionEvent.requestPermission === 'function') {
        alert('hello');
        // Handle iOS 13+ devices.
        DeviceMotionEvent.requestPermission()
          .then((state) => {
            if (state === 'granted') {
              alert('good');
              //window.addEventListener('devicemotion', handleOrientation);
              window.addEventListener("devicemotion", handleMotion);
            } else {
              console.error('Request to access the orientation was rejected');
            }
          })
          .catch(console.error);
      } else {
        // Handle regular non iOS 13+ devices.
        window.addEventListener('devicemotion', handleMotion);
        alert('ok');
      }
    }

    document.getElementById("accelid").onclick = onClick;
    </script>